---
title: "Google GKE Cleanup"
description: "A simple bash command to cleanup Google Kubernetes pods.
Preemptible nodes leave behind pods in a 'Shutdown' state. This simple command
will clean them all up in one go."
date: "2021-08-27"
readTime: 2
ogTitle: "Clean Up Your Google Kubernetes Pods"
ogDescription: "A simple command line to clean up your Google Kubernetes
Pods running on preemptible nodes"
ogImage: "https://bensthoughts.netlify.app/_next/image?url=%2Fassets%2Fblog%2Fimages%2Fgoogle-gke-cleanup.jpg&w=828&q=75"
twitterTitle: "Clean Up Your Google Kubernetes Pods"
twitterDescription: "A simple command line to clean up your Google Kubernetes
Pods running on preemptible nodes"
twitterImage: "https://bensthoughts.netlify.app/_next/image?url=%2Fassets%2Fblog%2Fimages%2Fgoogle-gke-cleanup.jpg&w=828&q=75"
tags:
  - 'Google'
  - 'GKE'
  - 'preemptible'
  - 'Shutdown'
  - 'bash'
---
<!-- ## Cleaning up GKE pods on preemptible nodes -->

<HeaderImage
  src="/assets/blog/images/google-gke-cleanup.jpg"
  alt="Blog header image"
  width="810"
  height="456"
/>

> A simple solution to a common problem.

If you have ever used google GKE (Kubernetes Engine) with preemptible nodes you
would likely have found yourself in the situation of having a bunch of pods
sitting around in a Shutdown state littering your cluster.  GKE likely
preempted the node the pods were running on, shutdown the pods, and then started
up new pods on new nodes.  The old pods are are left behind just so that you can
check the logs in case anything went wrong outside of the nodes being shutdown.

We often don't need these pods at all and should be cleaning them up by deleting them.  This is a simple bash command to eliminate all of those pods.

<CommandLine
  command="kubectl get pods"
  options=""
  args="| grep Shutdown | awk '{print $1}' | xargs kubectl delete pod"
/>